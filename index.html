<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Host</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f0f9ff; text-align: center; }
        .box { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        textarea { width: 100%; height: 200px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        button { background: #2563eb; color: white; padding: 12px 20px; border: none; border-radius: 5px; margin-top: 10px; cursor: pointer; font-size: 16px; width: 100%; }
        #result { display: none; margin-top: 20px; padding: 10px; background: #dcfce7; border-radius: 5px; color: #166534; }
        a { font-weight: bold; color: #15803d; word-break: break-all; }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="box">
        <h2>üöÄ HTML ‡¶™‡¶æ‡¶¨‡¶≤‡¶ø‡¶∂‡¶æ‡¶∞</h2>
        <textarea id="code" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ HTML ‡¶ï‡ßã‡¶° ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®..."></textarea>
        <button onclick="publish()" id="btn">‡¶™‡¶æ‡¶¨‡¶≤‡¶ø‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        
        <div id="result">
            <p>‚úÖ ‡¶∏‡¶æ‡¶ï‡¶∏‡ßá‡¶∏! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï:</p>
            <a id="link" href="#" target="_blank">...</a>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD-fR5yCte_c2pHpd0WD5IVjWmUvfUl5wA",
            authDomain: "html-code-hosting.firebaseapp.com",
            projectId: "html-code-hosting",
            storageBucket: "html-code-hosting.firebasestorage.app",
            messagingSenderId: "22191194064",
            appId: "1:22191194064:web:47fcd0b42f0f770ede43d5"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function publish() {
            const html = document.getElementById('code').value;
            if (!html) return alert("‡¶ï‡ßã‡¶° ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ!");
            
            document.getElementById('btn').innerText = "‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...";
            
            db.collection('sites').add({
                html: html,
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                status: 'active'
            }).then((doc) => {
                const url = window.location.origin + window.location.pathname.replace('index.html', '') + 'view.html?id=' + doc.id;
                document.getElementById('link').href = url;
                document.getElementById('link').innerText = url;
                document.getElementById('result').style.display = 'block';
                document.getElementById('btn').innerText = "‡¶™‡¶æ‡¶¨‡¶≤‡¶ø‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®";
            }).catch((err) => {
                alert("‡¶è‡¶∞‡¶∞: " + err.message);
                document.getElementById('btn').innerText = "‡¶™‡¶æ‡¶¨‡¶≤‡¶ø‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®";
            });
        }
    </script>
</body>
</html>
